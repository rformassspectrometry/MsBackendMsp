<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='The MsBackendMsp class supports import of MS/MS spectra data from
files in NIST MSP file format. MsBackendMsp extends the
MsBackendDataFrame() backend directly and supports thus the
applyProcessing() function to make data manipulations persistent.
New objects are created with the MsBackendMsp function. The
backendInitialize method has to be subsequently called to
initialize the object and import MS/MS data from (one or more) msp
files.
The MsBackendMsp backend provides an export method that allows to export
the data from the Spectra object (parameter x) to a file in msp format.
Parameters to this function are:
x: the Spectra object that should be exported.
file: character(1) with the desired file name.
mapping: named character providing the mapping between spectra
variables and MSP data fields. Defaults to
mapping = spectraVariableMapping(MsBackendMsp()).
allVariables: logical(1) whether all spectra variables in x should be
exported or only those defined with mapping.
exportName: logical(1) whether a NAME field should always be exported
even if not provided in x.


See the package vignette for details and examples.
The spectraVariableMapping function allows to provide the mapping between
spectra variable names (i.e. the names that will be used for the spectra
variables in the Spectra() object) and the data field names of the
MSP file. Parameter format allows to select pre-defined mappings. Currently
supported mapping flavors are:
format = "msp": default MSP field names. Should work with standard NIST
MSP files or MSP files exported from MS-DIAL.
format = "mona": MSP file format from MoNA including LipidBlast.

'><title>MS data backend for msp files — MsBackendMsp • MsBackendMsp</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MS data backend for msp files — MsBackendMsp"><meta property="og:description" content='The MsBackendMsp class supports import of MS/MS spectra data from
files in NIST MSP file format. MsBackendMsp extends the
MsBackendDataFrame() backend directly and supports thus the
applyProcessing() function to make data manipulations persistent.
New objects are created with the MsBackendMsp function. The
backendInitialize method has to be subsequently called to
initialize the object and import MS/MS data from (one or more) msp
files.
The MsBackendMsp backend provides an export method that allows to export
the data from the Spectra object (parameter x) to a file in msp format.
Parameters to this function are:
x: the Spectra object that should be exported.
file: character(1) with the desired file name.
mapping: named character providing the mapping between spectra
variables and MSP data fields. Defaults to
mapping = spectraVariableMapping(MsBackendMsp()).
allVariables: logical(1) whether all spectra variables in x should be
exported or only those defined with mapping.
exportName: logical(1) whether a NAME field should always be exported
even if not provided in x.


See the package vignette for details and examples.
The spectraVariableMapping function allows to provide the mapping between
spectra variable names (i.e. the names that will be used for the spectra
variables in the Spectra() object) and the data field names of the
MSP file. Parameter format allows to select pre-defined mappings. Currently
supported mapping flavors are:
format = "msp": default MSP field names. Should work with standard NIST
MSP files or MSP files exported from MS-DIAL.
format = "mona": MSP file format from MoNA including LipidBlast.

'><meta property="og:image" content="https://rformassspectrometry.github.io/MsBackendMsp/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MsBackendMsp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/MsBackendMsp.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/RforMassSpectrometry/MsBackendMsp/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>MS data backend for msp files</h1>
      <small class="dont-index">Source: <a href="https://github.com/RforMassSpectrometry/MsBackendMsp/blob/HEAD/R/MsBackendMsp.R" class="external-link"><code>R/MsBackendMsp.R</code></a></small>
      <div class="d-none name"><code>MsBackendMsp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>MsBackendMsp</code> class supports import of MS/MS spectra data from
files in NIST MSP file format. <code>MsBackendMsp</code> extends the
<code>MsBackendDataFrame()</code> backend directly and supports thus the
<code>applyProcessing()</code> function to make data manipulations persistent.</p>
<p>New objects are created with the <code>MsBackendMsp</code> function. The
<code>backendInitialize</code> method has to be subsequently called to
initialize the object and import MS/MS data from (one or more) msp
files.</p>
<p>The <code>MsBackendMsp</code> backend provides an <code>export</code> method that allows to export
the data from the <code>Spectra</code> object (parameter <code>x</code>) to a file in msp format.
Parameters to this function are:</p><ul><li><p><code>x</code>: the <code>Spectra</code> object that should be exported.</p></li>
<li><p><code>file</code>: <code>character(1)</code> with the desired file name.</p></li>
<li><p><code>mapping</code>: named <code>character</code> providing the mapping between spectra
variables and MSP data fields. Defaults to
<code>mapping = spectraVariableMapping(MsBackendMsp())</code>.</p></li>
<li><p><code>allVariables</code>: <code>logical(1)</code> whether all spectra variables in <code>x</code> should be
exported or only those defined with <code>mapping</code>.</p></li>
<li><p><code>exportName</code>: <code>logical(1)</code> whether a <code>NAME</code> field should always be exported
even if not provided in <code>x</code>.</p></li>
</ul><p>See the package vignette for details and examples.</p>
<p>The <code>spectraVariableMapping</code> function allows to provide the mapping between
spectra variable names (i.e. the names that will be used for the spectra
variables in the <code>Spectra()</code> object) and the data field names of the
MSP file. Parameter <code>format</code> allows to select pre-defined mappings. Currently
supported mapping flavors are:</p><ul><li><p><code>format = "msp"</code>: default MSP field names. Should work with standard NIST
MSP files or MSP files exported from MS-DIAL.</p></li>
<li><p><code>format = "mona"</code>: MSP file format from MoNA including LipidBlast.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S4 method for MsBackendMsp</span></span>
<span><span class="fu">backendInitialize</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">file</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu">spectraVariableMapping</span><span class="op">(</span><span class="va">object</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  BPPARAM <span class="op">=</span> <span class="fu">bpparam</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">MsBackendMsp</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for MsBackendMsp</span></span>
<span><span class="fu">spectraVariableMapping</span><span class="op">(</span><span class="va">object</span>, format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"msp"</span>, <span class="st">"mona"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for MsBackendMsp</span></span>
<span><span class="fu">export</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">x</span>,</span>
<span>  file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu">spectraVariableMapping</span><span class="op">(</span><span class="fu">MsBackendMsp</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  allVariables <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  exportName <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>Instance of <code>MsBackendMsp</code> class.</p></dd>


<dt>file</dt>
<dd><p><code>character</code> with the (full) file name(s) of the msp file(s)
from which MS/MS data should be imported or exported.</p></dd>


<dt>mapping</dt>
<dd><p>named <code>character</code> vector to rename MSP fields to spectra
variables (see <code>spectraVariableMapping()</code>). This allows to correctly
import also custom fields or data from files with different MSP
<em>flavors</em>.</p></dd>


<dt>...</dt>
<dd><p>Currently ignored.</p></dd>


<dt>BPPARAM</dt>
<dd><p>Parameter object defining the parallel processing
setup to import data in parallel. Defaults to <code>BPPARAM = bpparam()</code>. See <code>bpparam()</code> for more information.</p></dd>


<dt>format</dt>
<dd><p>For <code>spectraVariableMapping</code>: <code>character(1)</code> specifying for
which MSP <em>flavour</em> the mapping should be returned. Currently supported
are: <code>format = "msp"</code> (generic MSP format, for example for MS-DIAL MSP
files) and <code>format = "mona"</code> (MSP files in MoNA flavour).</p></dd>


<dt>x</dt>
<dd><p>For <code>export</code>: a <code>Spectra()</code> object that should be exported to the
specified MSP file.</p></dd>


<dt>allVariables</dt>
<dd><p><code>logical(1)</code> whether all spectra variables in <code>x</code>
should be exported or only those defined with <code>mapping</code>.</p></dd>


<dt>exportName</dt>
<dd><p><code>logical(1)</code> whether a <code>NAME</code> field should always be
exported even if not provided in <code>x</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>MsBackendMsp</code> and <code>backendInitialize</code> return an instance of a
<code>MsBackendMsp</code> class. <code>spectraVariableMapping</code> a named <code>character</code></p>


<p>vector with the mapping between spectra variables and MSP data fields.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Steffen Neumann, Michael Witting, Laurent Gatto and Johannes Rainer</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Import spectra from a MSP file from LipidBlast</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"small-export-LipidBlast.msp"</span>,</span></span>
<span class="r-in"><span>    package <span class="op">=</span> <span class="st">"MsBackendMsp"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">be</span> <span class="op">&lt;-</span> <span class="fu">backendInitialize</span><span class="op">(</span><span class="fu">MsBackendMsp</span><span class="op">(</span><span class="op">)</span>, <span class="va">f</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Start data import from 1 files ... </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> done</span>
<span class="r-in"><span><span class="va">be</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MsBackendMsp with 5 spectra</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     msLevel     rtime scanIndex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         2        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ... 32 more variables/columns.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">msLevel</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2 2 2 2 2</span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">intensity</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NumericList of length 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]] 80.08008 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]] 80.08008 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]] 80.08008 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]] 30.03003 50.05005 50.05005 50.05005 ... 70.07007 50.05005 50.05005 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]] 30.03003 50.05005 50.05005 50.05005 ... 70.07007 50.05005 50.05005 100</span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">mz</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NumericList of length 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]] 85.02841 232.1543</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]] 85.02841 246.17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]] 85.02841 260.1856</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]] 152.9958 227.2016 283.2643 327.2329 ... 691.4344 703.5283 1451.996</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[5]] 152.9958 253.2173 255.233 281.2486 ... 673.4814 721.4814 1451.996</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## precursor m/z are however all missing</span></span></span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">precursorMz</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA NA NA NA NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Default spectra variable mapping</span></span></span>
<span class="r-in"><span><span class="fu">spectraVariableMapping</span><span class="op">(</span><span class="fu">MsBackendMsp</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            name       accession         formula        inchikey          adduct </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          "NAME"           "DB#"       "FORMULA"      "INCHIKEY" "PRECURSORTYPE" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       exactmass           rtime     precursorMz          adduct          smiles </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     "EXACTMASS" "RETENTIONTIME"   "PRECURSORMZ" "PRECURSORTYPE"        "SMILES" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           inchi        polarity      instrument </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         "INCHI"       "IONMODE"    "INSTRUMENT" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## In fact, to read MSP files in "LipidBlast flavour" (same as MoNA) we</span></span></span>
<span class="r-in"><span><span class="co">## should use a different spectra variable mapping</span></span></span>
<span class="r-in"><span><span class="fu">spectraVariableMapping</span><span class="op">(</span><span class="fu">MsBackendMsp</span><span class="op">(</span><span class="op">)</span>, <span class="st">"mona"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  name               synonym             accession </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                "Name"               "Synon"                 "DB#" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              inchikey                adduct           precursorMz </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            "InChIKey"      "Precursor_type"         "PrecursorMZ" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              polarity               formula             exactmass </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            "Ion_mode"             "Formula"           "ExactMass" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> collision_energy_text               msLevel </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    "Collision_energy"       "Spectrum_type" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Importing the data with this will correctly retrieve data</span></span></span>
<span class="r-in"><span><span class="va">be</span> <span class="op">&lt;-</span> <span class="fu">backendInitialize</span><span class="op">(</span><span class="fu">MsBackendMsp</span><span class="op">(</span><span class="op">)</span>, <span class="va">f</span>,</span></span>
<span class="r-in"><span>    mapping <span class="op">=</span> <span class="fu">spectraVariableMapping</span><span class="op">(</span><span class="fu">MsBackendMsp</span><span class="op">(</span><span class="op">)</span>, <span class="st">"mona"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Start data import from 1 files ... </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> done</span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">precursorMz</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  232.1543  246.1700  260.1856 1451.9962 1451.9962</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Other fields are also correctly mapped, but might need to be converted</span></span></span>
<span class="r-in"><span><span class="co">## to e.g. numeric, such as "exactmass"</span></span></span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">exactmass</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "232.1543346040907"  "246.16998466809073" "260.18563473209076"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "1453.003526472"     "1453.003526472"    </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">exactmass</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">be</span><span class="op">$</span><span class="va">exactmass</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">adduct</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "[M]+"   "[M]+"   "[M]+"   "[M-H]-" "[M-H]-"</span>
<span class="r-in"><span><span class="va">be</span><span class="op">$</span><span class="va">formula</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "[C11H22NO4]+" "[C12H24NO4]+" "[C13H26NO4]+" "C81H146O17P2" "C81H146O17P2"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Exporting Spectra objects in MSP format.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sps</span> <span class="op">&lt;-</span> <span class="fu">Spectra</span><span class="op">(</span><span class="va">be</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">export</span><span class="op">(</span><span class="fu">MsBackendMsp</span><span class="op">(</span><span class="op">)</span>, <span class="va">sps</span>, file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stdout</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NAME: ACar 4:0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> msLevel: MS2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IONMODE: Positive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PRECURSORMZ: 232.15433</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Comments: "SMILES=CCCC(=O)OC(CC(O)=O)C[N+](C)(C)C" "compound class=ACar" "computed SMILES=O=C(O)CC(OC(=O)CCC)C[N+](C)(C)C" "computed InChI=InChI=1S/C11H21NO4/c1-5-6-11(15)16-9(7-10(13)14)8-12(2,3)4/h9H,5-8H2,1-4H3/p+1" "retention time=0.51" "collision energy spread=15 V" "author=Tobias Kind, Hiroshi Tsugawa" "computed mass accuracy=2.3431646471704717" "computed mass error=5.439758187435473E-4" "SPLASH=splash10-001r-7090000000-aa12589a2481560ea0d5" "submitter=Tobias Kind (University of California, Davis)" "MoNA Rating=3.6363636363636367"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Instrument: SCIEX 5600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Instrument_type: in-silico QTOF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MW: 232</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Num.Peaks: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DB#: LipidBlast000001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PRECURSORTYPE: [M]+</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> collision_energy_text: 45 V</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXACTMASS: 232.154334604091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FORMULA: [C11H22NO4]+</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INCHIKEY: QWYFHHGCZUCMBN-UHFFFAOYSA-O</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> synonym: [M]+</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> synonym: $:00in-source</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Num Peaks: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 85.02841 80.08008</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 232.1543 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NAME: ACar 5:0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> msLevel: MS2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IONMODE: Positive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PRECURSORMZ: 246.16998</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Comments: "SMILES=CCCCC(=O)OC(CC(O)=O)C[N+](C)(C)C" "compound class=ACar" "computed SMILES=O=C(O)CC(OC(=O)CCCC)C[N+](C)(C)C" "computed InChI=InChI=1S/C12H23NO4/c1-5-6-7-12(16)17-10(8-11(14)15)9-13(2,3)4/h10H,5-9H2,1-4H3/p+1" "retention time=0.68" "collision energy spread=15 V" "author=Tobias Kind, Hiroshi Tsugawa" "computed mass accuracy=2.209496944908765" "computed mass error=5.439118187382519E-4" "SPLASH=splash10-000b-7090000000-2b596f4df94dfefba50b" "submitter=Tobias Kind (University of California, Davis)" "MoNA Rating=3.6363636363636367"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Instrument: SCIEX 5600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Instrument_type: in-silico QTOF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MW: 246</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Num.Peaks: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DB#: LipidBlast000002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PRECURSORTYPE: [M]+</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> collision_energy_text: 45 V</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXACTMASS: 246.169984668091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FORMULA: [C12H24NO4]+</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INCHIKEY: VSNFQQXVMPSASB-UHFFFAOYSA-O</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> synonym: [M]+</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> synonym: $:00in-source</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Num Peaks: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 85.02841 80.08008</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 246.17 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NAME: ACar 6:0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> msLevel: MS2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IONMODE: Positive</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PRECURSORMZ: 260.18563</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Comments: "SMILES=CCCCCC(=O)OC(CC(O)=O)C[N+](C)(C)C" "compound class=ACar" "computed SMILES=O=C(O)CC(OC(=O)CCCCC)C[N+](C)(C)C" "computed InChI=InChI=1S/C13H25NO4/c1-5-6-7-8-13(17)18-11(9-12(15)16)10-14(2,3)4/h11H,5-10H2,1-4H3/p+1" "retention time=0.86" "collision energy spread=15 V" "author=Tobias Kind, Hiroshi Tsugawa" "computed mass accuracy=2.0902300356715053" "computed mass error=5.438478186761131E-4" "SPLASH=splash10-03dr-7090000000-a9ec485bc43949b4b278" "submitter=Tobias Kind (University of California, Davis)" "MoNA Rating=3.6363636363636367"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Instrument: SCIEX 5600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Instrument_type: in-silico QTOF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MW: 260</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Num.Peaks: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DB#: LipidBlast000003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PRECURSORTYPE: [M]+</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> collision_energy_text: 45 V</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXACTMASS: 260.185634732091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FORMULA: [C13H26NO4]+</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INCHIKEY: VVPRQWTYSNDTEA-UHFFFAOYSA-O</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> synonym: [M]+</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> synonym: $:00in-source</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Num Peaks: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 85.02841 80.08008</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 260.1856 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NAME: CL 72:6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> msLevel: MS2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IONMODE: Negative</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PRECURSORMZ: 1451.99625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Comments: "SMILES=CCCCCCCCCCCCCCCCCC(=O)OCC(COP(O)(=O)OCC(O)COP(O)(=O)OCC(COC(=O)CC\C=C/C\C=C/C\C=C/C\C=C/C\C=C/C\C=C/CC)OC(=O)CCCCCCCCCCCCC)OC(=O)CCCCCCCCCCCCCCCCC" "compound class=CL" "computed SMILES=O=C(OCC(OC(=O)CCCCCCCCCCCCC)COP(=O)(O)OCC(O)COP(=O)(O)OCC(OC(=O)CCCCCCCCCCCCCCCCC)COC(=O)CCCCCCCCCCCCCCCCC)CCC=CCC=CCC=CCC=CCC=CCC=CCC" "computed InChI=InChI=1S/C81H146O17P2/c1-5-9-13-17-21-25-29-32-35-36-37-38-41-43-47-50-54-58-62-66-79(84)91-71-76(97-80(85)67-63-59-55-51-45-28-24-20-16-12-8-4)73-95-99(87,88)93-69-75(82)70-94-100(89,90)96-74-77(98-81(86)68-64-60-56-52-48-44-40-34-31-27-23-19-15-11-7-3)72-92-78(83)65-61-57-53-49-46-42-39-33-30-26-22-18-14-10-6-2/h9,13,21,25,32,35,37-38,43,47,54,58,75-77,82H,5-8,10-12,14-20,22-24,26-31,33-34,36,39-42,44-46,48-53,55-57,59-74H2,1-4H3,(H,87,88)(H,89,90)/b13-9-,25-21-,35-32-,38-37-,47-43-,58-54-" "retention time=11.91" "collision energy spread=15 V" "author=Tobias Kind, Hiroshi Tsugawa" "computed mass accuracy=3.2506971738511424E-4" "computed mass error=-4.720000106317457E-7" "SPLASH=splash10-0w4i-0134901100-d27b9577a1230ec65177" "submitter=Tobias Kind (University of California, Davis)" "MoNA Rating=4.5"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Instrument: SCIEX 5600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Instrument_type: in-silico QTOF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MW: 1453</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Num.Peaks: 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DB#: LipidBlast395475</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PRECURSORTYPE: [M-H]-</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> collision_energy_text: 45 V</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXACTMASS: 1453.003526472</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FORMULA: C81H146O17P2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INCHIKEY: KWABUIIFXPUAEH-OXNFOSRESA-N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> synonym: CL 14:0-22:6-18:0-18:0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> synonym: $:00in-source</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Num Peaks: 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 152.9958 30.03003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 227.2016 50.05005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 283.2643 50.05005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 327.2329 50.05005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 363.1942 70.07007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 419.2568 70.07007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 463.2255 70.07007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 691.4344 50.05005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 703.5283 50.05005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1451.996 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NAME: CL 72:6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> msLevel: MS2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> IONMODE: Negative</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PRECURSORMZ: 1451.99625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Comments: "SMILES=CCCCCCCCCCCCCCCC(=O)OC(COC(=O)CCCCCCC\C=C/CCCCCCCC)COP(O)(=O)OCC(O)COP(O)(=O)OCC(COC(=O)CCCCCCCC\C=C/C\C=C/C\C=C/C\C=C/CC)OC(=O)CCCCCCC\C=C/CCCCCC" "compound class=CL" "computed SMILES=O=C(OCC(OC(=O)CCCCCCCCCCCCCCC)COP(=O)(O)OCC(O)COP(=O)(O)OCC(OC(=O)CCCCCCCC=CCCCCCC)COC(=O)CCCCCCCCC=CCC=CCC=CCC=CCC)CCCCCCCC=CCCCCCCCC" "computed InChI=InChI=1S/C81H146O17P2/c1-5-9-13-17-21-25-29-33-35-36-37-38-40-44-46-50-54-58-62-66-79(84)92-72-77(98-81(86)68-64-60-56-52-48-42-32-28-24-20-16-12-8-4)74-96-100(89,90)94-70-75(82)69-93-99(87,88)95-73-76(97-80(85)67-63-59-55-51-47-41-31-27-23-19-15-11-7-3)71-91-78(83)65-61-57-53-49-45-43-39-34-30-26-22-18-14-10-6-2/h9,13,21,25,28,32-35,37-39,75-77,82H,5-8,10-12,14-20,22-24,26-27,29-31,36,40-74H2,1-4H3,(H,87,88)(H,89,90)/b13-9-,25-21-,32-28-,35-33-,38-37-,39-34-" "retention time=11.65" "collision energy spread=15 V" "author=Tobias Kind, Hiroshi Tsugawa" "computed mass accuracy=3.2506971738511424E-4" "computed mass error=-4.720000106317457E-7" "SPLASH=splash10-0uyi-0157901100-d3b7dfa9dd7050026484" "submitter=Tobias Kind (University of California, Davis)" "MoNA Rating=4.5"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Instrument: SCIEX 5600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Instrument_type: in-silico QTOF</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> MW: 1453</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Num.Peaks: 12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> DB#: LipidBlast398514</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PRECURSORTYPE: [M-H]-</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> collision_energy_text: 45 V</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> EXACTMASS: 1453.003526472</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FORMULA: C81H146O17P2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INCHIKEY: WINXBODRGKNJDS-DUULZMMUSA-N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> synonym: CL 16:0-18:1-16:1-22:4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> synonym: $:00in-source</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Num Peaks: 12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 152.9958 30.03003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 253.2173 50.05005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 255.233 50.05005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 281.2486 50.05005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 331.2643 50.05005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 389.2098 70.07007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 391.2255 70.07007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 417.2411 70.07007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 467.2568 70.07007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 673.4814 50.05005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 721.4814 50.05005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1451.996 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Neumann Steffen, Johannes Rainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.9000.</p>
</div>

    </footer></div>

  

  

  </body></html>

